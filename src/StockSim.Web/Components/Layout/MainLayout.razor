@using MudBlazor
@using StockSim.Web.Components.Shared
@inherits Microsoft.AspNetCore.Components.LayoutComponentBase
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor Http
@inject IThemePrefService ThemePref

<MudThemeProvider IsDarkMode="ThemePref.Get(Http.HttpContext!)" Theme="_theme" />
<MudDialogProvider />
<MudLayout>

  <!-- TOP BAR -->
  <MudAppBar Color="Color.Surface" Elevation="0">
    <MudText Typo="Typo.h6" Class="mr-4">StockSim</MudText>
    <MudSpacer />
    <ThemeToggleIsland /> 
  </MudAppBar>

  <!-- SIDE NAV -->
  <MudDrawer Open="true" Variant="DrawerVariant.Mini" Elevation="0">
    <NavMenu /> 
  </MudDrawer>

  <!-- PAGE BODY -->
  <MudMainContent>
    <div class="p-2">
      @Body
    </div>
  </MudMainContent>

</MudLayout>

@code {
      private MudTheme _theme = new ()
    {
        PaletteLight = new PaletteLight
        {
            // primary + supporting accent
            Primary = "#2563EB",            
            PrimaryContrastText = "#FFFFFF",
            Secondary = "#EC4899",          
            SecondaryContrastText = "#FFFFFF",

            Info = "#0EA5E9",
            Success = "#16A34A",
            Warning = "#F59E0B",
            Error = "#DC2626",

            // neutrals (single gray scale)
            Background = "#FFFFFF",
            Surface = "#F8FAFC",            
            AppbarBackground = "#111827",   
            AppbarText = "#F9FAFB",

            DrawerBackground = "#0F172A",   
            DrawerText = "#E5E7EB",

            TextPrimary = "#0F172A",
            TextSecondary = "#475569",
            Divider = "#E2E8F0",
            LinesDefault = "#E2E8F0",
            TableLines = "#E2E8F0",
            ActionDefault = "#0F172A",
            ActionDisabled = "#94A3B8",
            ActionDisabledBackground = "#E5E7EB",
        },
        PaletteDark = new PaletteDark
        {
            Primary = "#60A5FA",            
            PrimaryContrastText = "#0B1220",
            Secondary = "#F472B6",          
            SecondaryContrastText = "#0B1220",

            Info = "#38BDF8",
            Success = "#22C55E",
            Warning = "#F59E0B",
            Error = "#F43F5E",

            Background = "#0B1220",         
            Surface = "#0F172A",            
            AppbarBackground = "#0B1220",
            AppbarText = "#E5E7EB",
            DrawerBackground = "#111827",
            DrawerText = "#CBD5E1",

            TextPrimary = "#E5E7EB",
            TextSecondary = "#94A3B8",
            Divider = "#1F2937",
            LinesDefault = "#1F2937",
            TableLines = "#1F2937",
            ActionDefault = "#E2E8F0",
            ActionDisabled = "#64748B",
            ActionDisabledBackground = "#111827",
        },
        
        Typography = new Typography { Default = new DefaultTypography  { FontFamily = new[] { "Inter", "Roboto", "Segoe UI", "Arial", "sans-serif" } } },
        LayoutProperties = new LayoutProperties { DefaultBorderRadius = "6px" }
    };
}